<!doctype html>
<html lang="en">

<head>
      <meta charset="UTF-8">
      <meta name="viewport"
            content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
      <meta http-equiv="X-UA-Compatible" content="ie=edge">
      <link rel="stylesheet" type="text/css" href="https://cdn.proxynova.com/css/app.css?id=3e8cac0436f9cd4869de">
      <title>Send an email to someone anonymously!</title>

      <base href="https://www.proxynova.com/">


      <style>
            body {
                  font-family: Helvetica Neue, Roboto, Arial, sans-serif !important;
                  background: white;
                  padding-top: 1em;
                  margin-bottom: 5em;
            }

            h1,
            h2,
            h3,
            h4 {
                  color: #1DA1F2;
                  text-align: center;
            }

            #embed_container {
                  max-width: 1400px;
                  background: white;
            }
      </style>


      <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>

</head>

<body>

      <div class="mx-auto" id="embed_container" >
            <h1>send mail</h1>
            <form class="mx-auto p-8 border" style="max-width: 650px;">

                  <div class="mb-5">
                        <label for="email_to">To:
                              <input type="email"  id="email_to">
                        </label>
                  </div>

                  <div class="mb-5">
                        <label for="name_from">From (optional):
                              <input type="text"  id="name_from">
                        </label>
                  </div>

                  <div class="mb-5">
                        <label for="txt_subject">Subject Line (optional):
                              <input type="text" id="txt_subject">
                        </label>
                  </div>

                  <div class="mb-5">
                        <textarea rows="8" 
                              id="txt_message"></textarea>
                  </div>

                  <div class="flex justify-center">
                        <button type="button" class="btn btn-primary btn-large" onclick="sendEmail(this)" id="enter_btn">
                              <span class="spinner mr-2"></span> Send Email
                        </button>
                  </div>

            </form>
            <script>

                  /**
                   *
                   * @param  {HTMLButtonElement} btn
                   */
                  function sendEmail(btn) {
                        btn.classList.add('loading', 'disabled');

                        const emailTo = document.querySelector('#email_to').value;
                        const nameFrom = document.querySelector('#name_from').value;
                        const subject = document.querySelector('#txt_subject');
                        const messageText = document.querySelector('#txt_message');

                        $.post('/api/send-email', {
                              to: emailTo,
                              from: nameFrom,
                              subject: subject.value,
                              message: messageText.value
                        }, function () {

                              subject.value = '';
                              messageText.value = '';

                              // alert('Email sent!');

                        }).fail((err) => {
                              alert(json_get_string(err.responseText, 'error', 'Error! Try again later'));
                        }).always(() => {
                              btn.classList.remove('disabled', 'loading');
                        });
                  }

            </script>

      </div>
<h1>mail is sended
</h1>
      <script src="https://cdn.proxynova.com/js/manifest.js?id=dfe056f12c3e29911fad"></script>
      <script src="https://cdn.proxynova.com/js/vendor.js?id=5984c45f92b5c469c8c8"></script>
      <script src="https://cdn.proxynova.com/js/combined.js?id=09ac3eb12f4f753e344a"></script>
      <script src="https://cdn.proxynova.com/js/app.js?id=bcd3b0cb24c1946664fe"></script>
      <script src="https://kit.fontawesome.com/9d8a8fc3d3.js" crossorigin="anonymous"></script>

</body>

</html>